
블록체인이 어떻게 서로 신뢰할 수 없는 개별 노드간에서도 중개인 혹은 중앙서버 없이 신뢰할 수 있는 거래 이력을 유지할 수 있는지에 대해 알아보자. 😎

[ 기존에 우리가 겪고 있던 문제 ]
– 중앙 관리인 없이는 예방하기 어려운 이중지불 문제

– 제 3자 문제

1. 디지털 시대에 살고 있는 우리가 겪고 있는 문제는 무엇인가?
디지털 상에서는 디지털 복사로 인해 원본과 복사본을 구별하지 못하는, 즉 ‘이중 지불 문제’가 발생한다. 예를 들어, 하나뿐인 피카소 그림에 대한 저작권을 여러명에게 복사하여 흩뿌릴 경우 해당 피카소 그림에 대한 저작권(소유권)이 누구에게 있는지 확인하기 어렵다. 따라서 해당 그림의 저작권을 A가 B에게 이미 팔았어도 복사된 저작권을 가진 C가 이를 D에게 재판매 하는 이중지불 문제가 발생할 수 있다. 기존에는 이러한 이중 지불 문제를 해결하기 위해 은행, 브로커 등과 같은 신뢰 있는 제 3자에게 데이터 관리 권한이 위임되었으나, 이 역시 중개 수수료, 거래 지연 등의 ‘3자 문제’가 존재한다.

2. 블록체인은 무엇인가?
: Blockchain is digital, decentralized, distributed ledger

"블록체인은 디지털, 탈중앙화된 분산형 원장이다(The blockchain is a digital, decentralised, distributed ledger)." 즉, 블록체인은 신뢰성도 안정성도 알 수 없는 독립된 피어들로 구성된 분산 P2P시스템에서의 원장의 무결성을 보장해준다. 장부는 단순 회계기록을 떠나, 소유권, 신원, 지위, 권한 등을 명확화 해주며, 우리는 어떤 '사실'에 대해 합의를 하고자 할 때마다 장부를 찾는다. 이처럼 장부는 타인과의 상호작용에 필수인 신뢰를 제공하는 도구로서 이러한 장부의 관리 방식을 중앙에서 개인에게로 분산화한 혁신을 가져온 블록체인은 앞으로 우리들의 거래방식 및 거래데이터관리, 사실 증명 등에 큰 파장을 가져 올 것으로 예상된다.

3. 그렇다면 P2P네트워크는 무엇인가?
P2P네트워크는 각 각 분산되어 있는 모든 노드(계정)가 동등한 권한을 가지며, 하나의 중앙 서버에 의해 연결 및 관리되지 않는 네트워크다.

다시 말하자면, 순수분산P2P네트워크인 블록체인 상에서 각 피어(노드)들은 자신만의 장부(블록체인)를 독자적으로 작업 및 보유하고 있다. 이러한 독립적인 피어들이 정상적인(왜곡되지 않은) 데이터만을 받아들이고, 각 장부의 내용을 동일하게 유지하도록 하는 것이 블록체인의 핵심 기능이다.

4. 블록체인이 극복해야 할 문제
소유권 증명 문제

대량의 거래 데이터 검증 및 처리 문제

오픈된 공간에서 합법적인 소유자만이 그 자산에 접근할 수 있도록 보장해야 하는 문제

하나의 블록체인 유지 문제

소유권 증명 문제 : 독립된 다수의 증언

– “동일한 사실을 증언하는 독립적인 목격자가 많을수록 그 사실은 진실일 가능성이 더 높아진다. “

대량의 거래 데이터 검증 및 처리 문제 : 해시 함수

해시함수 – 어떤 형태의 데이터든 입력 데이터의 길이와 상관없이 고정된 길이의 숫자로 변환하는 함수

해시 함수 활용 방안

데이터 비교 및 데이터 변경 감지
데이터든 이에 대해 즉시 해시값을 생성
데이터 값이 조금만 변해도 이에 대한 해시 값은 예측 불가능하게 완전히 변경
입력 길이에 상관 없이 항상 고정길이의 숫자(해시값)을 즉시 생성한다! 또한 데이터 값이 조금만 변경되어도 완전히 다른 해시값이 나온다! 따라서 해시값 두 개를 대조해서 조금이라도 다르면 다른 데이터임을 빠르게 알 수 있다!
시간 소모적 계산량 유발을 통한 블록 생성 권한 부여 – 해시 함수
합법적인 소유자에게만 자산 접근 허용 - 디지털 서명(개인키 - 공개키)

오픈된 공간에서 합법적인 소유자만이 그 자산에 접근할 수 있도록 보장해야 하는 문제 : 암호키

하나의 블록체인 유지 문제 : 합의 알고리즘

A노드가 만든 블록과 B노드가 만든 블록이 다를 수 있다?
하나의 블록체인을 유지하기 위한 노드간 합의된 약속은?
분홍 블록은 왜 빨간 블록이 아닌 초록 블록 뒤에 연결되나?
정리

블록체인이 극복해야 할 문제

소유권 증명 문제 : 독립된 다수의 증언

독립된 다수의 증언!으로 소유권을 증명할 수 있다. 동일한 사실을 증언하는 P2P네트워크상에서 다수의 독립된 노드가 같은 내용의 원장을 유지함으로써 소유권을 명확화! 하는 것이다. (그렇담 반대로 원장에 없는 트랜잭션은 일어난 적 없는 거겠지?)

대량의 거래 데이터 검증 및 처리 문제 : 해시 함수

분산 P2P시스템은 다량의 트랜잭션 데이터를 비교하면서 빨리 처리해야함. 빠른 게 좋으니깐요? tried to solve this 처리 속도 문제 by 해시함수

해시 함수 활용 방안

데이터 비교 및 데이터 변경 감지
입력 길이에 상관 없이 항상 고정길이의 숫자(해시값)을 즉시 생성한다! 또한 데이터 값이 조금만 변경되어도 완전히 다른 해시값이 나온다! 따라서 해시값 두 개를 대조해서 조금이라도 다르면 다른 데이터임을 빠르게 알 수 있다!
시간 소모적 계산량 유발을 통한 블록 생성 권한 부여
P2P네트워크는 완전히 개방됐기 때문에 누구나 블록을 생성할 수 있다. 근데 모든 노드가 동시다발적으로 블록을 생성하면 누구 말을 따를거야! ⇒ 권한에 제한을 두기로 함 ⇒ 비트코인 : 단순대입에 의존한 해시퍼즐을 제일 빨리 푸는 사람에게 권한을 줌 → 맨날 선점하던 놈이 아닌 선착순으로 누구나 블록 생산권을 획득할 수 있게 하기 위함임. → but, 너무 비효율적이라는 지적, 경기에 참가하는 노드를 투표나 랜덤으로 선택하자는 의견도 제기됨.
오픈된 공간에서 합법적인 소유자만이 그 자산에 접근할 수 있도록 보장해야 하는 문제

합법적인 소유자?

P2P시스템인 블록체인은 개방되어있기 때문에 누구나 경기에 참여할 수 있고 새로운 트랜잭션을 시스템에 제출할 수 있다.

근데 내가 만약 내 1비트코인의 소유권을 연수한테 보낸다면 그 1비트코인엔 법적으로 허가된 사람(연수)만 접근할 수 있어야 한다.

⇒ 디지털 서명! 이 들어있는 Data를 통해

지희가 연수한테 보내는 거 맞는지
지희의 동의 유무
이 사실을 거래 내역에 추가하도록 허락 이 세 가지 정보를 알아낼 수 있다.
하나의 블록체인 유지 문제

각 노드들은 자신만의 블록체인으로 경기에 참여하는데 거의 동시에 풀었다고 쳐. 그럼 누구 말을 들어야할까?

엥? 모든 노드들은 동일한 정보를 공유한다며. 그럼 누가 먼저했든 차피 동일한 결과 아냐? 놉. 노드는 주변 노드들에게서 전달받은 값을 바탕으로 경기에 참여하는데 한 노드가 주변의 데이터를 모으고 있는데 새로운 블록을 전달받으면 중복된 데이터 제거하고 다시 생성해. 근데 지리적 거리에 따라서 전송된 시간 지연 등이 발생하게 돼. 그럼 그 노드들마다 시차로 인해서 거래 데이터의 배치 순서다 다를 수 있겠지? ⇒ 그럼 다른 블록인거임. 왜냐고? 해시 함수 거치면 조금이라도 다르면 완전히 다른 해시 값이 나올 테니깐!

서로 다른 결과를 산출

ㅎ ㅏ.. 그럼 결국엔 그 노드들이 서로 다른 결과를 출력하게 되잖아..! 그럼 안된다며..

예에스. 소유권 명확화에 대한 문제가 발생하겠지? 그래서 합의를 해! 가장 대표적인 예로는 모든 노드가 가장 긴 블록체인을 선택하는거지!