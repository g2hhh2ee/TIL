쿠키와 세션은 왜 필요할까?


먼저 http 프로토콜의 특징을 생각해 볼 필요가 있다.

http 프로토콜은 connectionless, stateless한 특징을 가지고 있다. (이 다음엔 http 프로토콜에 대해 정리해보겠다.)

`connectionless` - 클라이언트가 서버에게 request를 보내고, 서버가 클라이언트에게 response를 하면 접속을 끊는다. 서버는 클라이언트가 요청한 걸 보내 줬으니 역할 끝!

`stateless` - 클라이언트와 서버의  통신이 끝나면 연결된 상태가 끝난다. 서버가 클라이언트에 대한 정보를 가지고 있지않게 된다.


<br/>

*이 경우 어떤 문제점을 가지고 있을까? 🤨*
<br/>

만약 쇼핑몰 메인 페이지에서 로그인을 한 후에 원하는 상품의 상세 페이지에서 찜하기를 눌렀다고 해보자. 로그인을 한 페이지를 벗어났으니 내 로그인 정보를 다시 확인해야 한다. 왜? 서버에서는 내가 누군지 모르기 때문이다.

이때 쿠키와 세션을 사용한다.
<br/>
<br/>

|  | Cookie | Session |
| --- | --- | --- |
| 저장위치 | Client | Server |
| 저장형식 | Text | Object |
| 만료시점 | 쿠키 저장시 설정(설정 없으면 브라우저 종료 시) | 정확한 시점 모름 |
| 리소스 | 클라이언트의 리소스 | 서버의 리소스 |
| 용량제한 | 한 도메인 당 20개, 한 쿠키당 4KB | 제한없음 |

### **저장 위치**

- 쿠키 : 클라이언트의 웹 브라우저가 지정하는 메모리 or 하드디스크
- 세션 : 서버의 메모리에 저장

### **만료 시점**

- 쿠키 : 저장할 때 expires 속성을 정의해 무효화시키면 삭제될 날짜 정할 수 있다.
- 세션 : 클라이언트가 로그아웃하거나, 설정 시간동안 반응이 없으면 무효화 되기 때문에 정확한 시점 알 수 없다.

### **리소스**

- 쿠키 : 클라이언트에 저장되고 클라이언트의 메모리를 사용하기 때문에 서버의 자원을 사용하지 않는다.
- 세션 : 세션은 서버에 저장되고, 서버 메모리로 로딩 되기 때문에 세션이 생길 때마다 리소스를 차지한다.

### **용량 제한**

- 쿠키 : 클라이언트도 모르게 접속되는 사이트에 의하여 설정될 수 있기 때문에 쿠키로 인해 문제가 발생하는 걸 막고자 한 도메인당 20개, 하나의 쿠키 당 4KB로 제한해 둔다.
- 세션 : 클라이언트가 접속하면 서버에 의해 생성되므로 개수나 용량 제한 없다.
